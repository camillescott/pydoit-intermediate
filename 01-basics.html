<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>pydoit for automation and applications: Doit basics</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <!-- <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/> -->
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
  <div class="banner">
  <h3>pydoit for automation and applications</h3>
  </div>

      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <h1 class="title">Doit basics</h1>
          
<div id="learning-objectives" class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="learning-objectives" class="objectives panel panel-warning"><span class="glyphicon glyphicon-certificate"></span>Learning Objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Discuss the build system</li>
<li>Write a pydoit hello world</li>
</ul>
</div>
</div>
<ul>
<li>Pydoit it is a task management and automation tool</li>
<li>It is similar to build systems like make (comparison: http://swcarpentry.github.io/bc/intermediate/doit/make-vs-doit.html)</li>
<li>Tasks are defined individually and executed in order according to dependencies, via a directed acyclic graph</li>
</ul>
<p>For me, it helps to immediately get started with an example. The basic building blocks of a pydoit workflow are tasks, which encode the work we would like to get done. Here is an extremely simple task:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> task_hello_world():
    <span class="cf">return</span> {<span class="st">&#39;actions&#39;</span>: [<span class="st">&#39;echo &quot;hello world!&quot; &gt; hello.txt&#39;</span>],
            <span class="co">&#39;targets&#39;</span>: [<span class="st">&#39;hello.txt&#39;</span>]}</code></pre></div>
<p>The task is a python function prefixed with <code>task</code>, which returns a dictionary containing some predefined entries. The <code>actions</code> entry is a list of the actual commands we'd like to run, in this case, a single shell command. The <code>targets</code> entry is a list of the files output by this task.</p>
<div id="testing-your-installation" class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="testing-your-installation" class="challenge panel panel-success"><span class="glyphicon glyphicon-pencil"></span>Testing your installation</h2>
</div>
<div class="panel-body">
<p>Create a working directory, and within it, create a script named dodo.py. Copy the above function into it, save, and close. Then, move to that directory and run <code>doit</code>. This should run the task and generate <code>hello.txt</code>.</p>
</div>
</div>
<p>Of course, hello world doesn't really do anything for us. Throughout this lesson, we're going to build a pipeline which downloads some data, plots it with matplotlib, generates a markup file with the chart, and outputs a final compiled document -- in other words, a barebones version of a publication pipeline.</p>
        </div>
      </div>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/camillescott/pydoit-intermediate">Source</a>
        <a class="label swc-blue-bg" href="camille.scott.w@gmail.com">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
  </body>
</html>
